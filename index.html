<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Keg washer Control</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
</head>
<body id="bodyBox">
    <div class="container-fluid MainBox">
        <div class="headBox row">
            <div class="d-none d-md-block col-md-1"></div>
            <div class="h1Box col-12 col-md-5">
                <div class="H1">עדכון פרמטרים במשטף חביות</div>
            </div>
            <div class="col-12 col-md-3">
                <img  class="logo img-fluid" src="assets/pics/hatch_logoblack_clear_Background.png">
            </div> 
            <div class="col-12 col-md-2 HeadinfoBox">
                <div class="Headinfo">עדכון אחרון 06/11/24 11:06PM</div>
                <div class="Headinfo">V 5.1.4</div>
                <div class="Headinfo">&copy; ישראל אטלו</div>
            </div> 
            <div class="d-none d-md-block col-md-1"></div>
        </div>
     
        <form id="control-form" method="POST" >
            <div class="formBox">
                <!-- stage 0 -->
                <div class="functionBox container-fluid">
                    <div class="FirstfunctionLabel functionLabel row">
                        <div class=" col-12 col-md-3">
                            <div>סייקל בדיקה ראשוני</div>
                        </div>
                        <div class="col-12 col-md-3 FNCTTglBox">
                            <div>|</div>
                            <div id="PrebootToggleHousing" class="FNCTglHouse">
                                <div class="FNCTglBtn" id="PrebootToggleBtn"></div>
                            </div>
                            <div>O</div>
                        </div>
                        <div class="col-12 col-md-3">
                            <div>חיישני לחץ</div>
                            <div class="note">יפעל רק אם המתג המכני מופעל!</div>
                        </div>
                        <div class="col-12 col-md-3 FNCTTglBox">
                            <div>|</div>
                            <div id="PressureToggleHousing" class="FNCTglHouse">
                                <div class="FNCTglBtn" id="PresuureToggleBtn"></div>
                            </div>
                            <div>O</div>
                        </div>
                    </div>
                </div>
                <!-- stage 1 -->
                <div class="functionBox container-fluid">
                    <div class="functionLabel row" id="label1">
                        <div class="col">שלב #1 דחיקת בירה החוצה עם אוויר</div>
                        <div class="col TglBtnBox"><img src="assets/pics/down.png" id="Tgl1"></div>
                    </div>
                    <div class="functionInputs row" id="stage1">
                        <div class="col-12 col-md-3 ParamterBox">
                            <label for="FirstAirPurgeRecure">כמות חזרות</label>
                            <input type="number" step="0.1" id="FirstAirPurgeRecure" name="FirstAirPurgeRecure" required value="{{ settings['FirstAirPurgeRecure'] }}">
                        </div>
                        <div class="col-12 col-md-4 ParamterBox">
                            <label for="FirstAirPurgeTon">משך כניסת אוויר בכל חזרה בשניות</label>
                            <input type="number" step="0.1" id="FirstAirPurgeTon" name="FirstAirPurgeTon" required value="{{ settings['FirstAirPurgeTon'] }}">
                        </div>
                        <div class="col-12 col-md-5 ParamterBox">
                            <label for="FirstAirPurgeToff">משך ניקוז ללא אוויר בכל חזרה בשניות</label>
                            <input type="number" step="0.1" id="FirstAirPurgeToff" name="FirstAirPurgeToff" required value="{{ settings['FirstAirPurgeToff'] }}">
                        </div>
                    </div>
                </div>
                <!-- stage 2-->
                <div class="functionBox container-fluid">
                    <div class="functionLabel row" id="label2">
                        <div class="col">שלב #2 שטיפה ראשונה במים</div>
                        <div class="col TglBtnBox"><img src="assets/pics/down.png" id="Tgl2"></div>
                    </div>
                    <div id="stage2">
                        <div class="functionInputs row fullborder">
                            <div class="col-12 ParamterBox">
                                <label for="InitialWaterFlud">משך מילוי מים ראשוני בשניות</label>
                                <input type="number" step="0.1" id="InitialWaterFlud" name="InitialWaterFlud" required value="{{ settings['InitialWaterFlud'] }}">
                            </div>
                        </div>
                        <div class="row functionSubLabel">התזת מים בינונית</div>
                        <div class="functionInputs row fullborder">
                            <div class="col-12 col-md-3 ParamterBox">
                                <label for="recureMedSquirt">כמות חזרות</label>
                                <input type="number" step="0.1" id="recureMedSquirt" name="recureMedSquirt" required value="{{ settings['recureMedSquirt'] }}">
                            </div>
                            <div class="col-12 col-md-4 ParamterBox">
                                <label for="medSquirtWaterOn">משך כניסת מים בכל חזרה בשניות</label>
                                <input type="number" step="0.1" id="medSquirtWaterOn" name="medSquirtWaterOn" required value="{{ settings['medSquirtWaterOn'] }}">
                            </div>
                            <div class="col-12 col-md-5 ParamterBox">
                                <label for="medSquirtWaterOff">משך ניקוז ללא מים בכל חזרה בשניות</label>
                                <input type="number" step="0.1" id="medSquirtWaterOff" name="medSquirtWaterOff" required value="{{ settings['medSquirtWaterOff'] }}">
                            </div>
                        </div>
                        <div class="row functionSubLabel">התזת מים קצרה</div>
                        <div class="functionInputs row fullborder">
                            <div class="col-12 col-md-3 ParamterBox">
                                <label for="recureShortSquirt">כמות חזרות</label>
                                <input type="number" step="0.1" id="recureShortSquirt" name="recureShortSquirt" required value="{{ settings['recureShortSquirt'] }}">
                            </div>
                            <div class="col-12 col-md-4 ParamterBox">
                                <label for="ShortSquirtWaterOn">משך כניסת מים בכל חזרה בשניות</label>
                                <input type="number" step="0.1" id="ShortSquirtWaterOn" name="ShortSquirtWaterOn" required value="{{ settings['ShortSquirtWaterOn'] }}">
                            </div>
                            <div class="col-12 col-md-5 ParamterBox">
                                <label for="ShortSquirtWaterOff">משך ניקוז ללא מים בכל חזרה בשניות</label>
                                <input type="number" step="0.1" id="ShortSquirtWaterOff" name="ShortSquirtWaterOff" required value="{{ settings['ShortSquirtWaterOff'] }}">
                            </div>
                        </div>
                        <div class="row functionSubLabel fullborder">התזת מים ארוכה</div>
                        <div class="functionInputs row fullborder">
                            <div class="col-12 col-md-3 ParamterBox">
                                <label for="recureLongSquirt">כמות חזרות</label>
                                <input type="number" step="0.1" id="recureLongSquirt" name="recureLongSquirt" required value="{{ settings['recureLongSquirt'] }}">
                            </div>
                            <div class="col-12 col-md-4 ParamterBox">
                                <label for="LongSquirtWaterOn">משך כניסת מים בכל חזרה בשניות</label>
                                <input type="number" step="0.1" id="LongSquirtWaterOn" name="LongSquirtWaterOn" required value="{{ settings['LongSquirtWaterOn'] }}">
                            </div>
                            <div class="col-12 col-md-5 ParamterBox">
                                <label for="LongSquirtWaterOff">משך ניקוז ללא מים בכל חזרה בשניות</label>
                                <input type="number" step="0.1" id="LongSquirtWaterOff" name="LongSquirtWaterOff" required value="{{ settings['LongSquirtWaterOff'] }}">
                            </div>
                        </div>
                        <div class="row functionSubLabel fullborder">שטיפה במים יחד עם משאבה לבניית לחץ</div>
                        <div class="functionInputs row">
                            <div class="col-12 ParamterBox">
                                <label for="RinseWaterWithPump">משך שטיפה במים עם משאבה לבניית לחץ</label>
                                <input type="number" step="0.1" id="RinseWaterWithPump" name="RinseWaterWithPump" required value="{{ settings['RinseWaterWithPump'] }}">
                            </div>
                        </div>
                    </div>
                </div>
                <!-- stage 3-->
                <div class="functionBox container-fluid">
                    <div class="functionLabel row" id="label3">
                        <div class="col">שלב #3 דחיקת מים לאחר שטיפה ראשונה החוצה עם אוויר</div>
                        <div class="col TglBtnBox"><img src="assets/pics/down.png" id="Tgl3"></div>
                    </div>
                    <div id="stage3">
                        <div class="functionInputs row">
                            <div class="col-12 col-md-3 ParamterBox">
                                <label for="PostWaterPurgeRecure">כמות חזרות</label>
                                <input type="number" step="0.1" id="PostWaterPurgeRecure" name="PostWaterPurgeRecure" required value="{{ settings['PostWaterPurgeRecure'] }}">
                            </div>
                            <div class="col-12 col-md-4 ParamterBox">
                                <label for="PostWaterPurgeTon">משך כניסת אוויר בכל חזרה בשניות</label>
                                <input type="number" step="0.1" id="PostWaterPurgeTon" name="PostWaterPurgeTon" required value="{{ settings['PostWaterPurgeTon'] }}">
                            </div>
                            <div class="col-12 col-md-5 ParamterBox">
                                <label for="PostWaterPurgeToff">משך ניקוז ללא אוויר בכל חזרה בשניות</label>
                                <input type="number" step="0.1" id="PostWaterPurgeToff" name="PostWaterPurgeToff" required value="{{ settings['PostWaterPurgeToff'] }}">
                            </div>
                        </div>
                    </div>
                </div>
                <!-- stage 4-->
                <div class="functionBox container-fluid">
                    <div class="functionLabel row" id="label4">
                        <div class="col">שלב #4 ניקוי בסודה קאוסטיק</div>
                        <div class="col TglBtnBox"><img src="assets/pics/down.png" id="Tgl4"></div>
                    </div>
                    <div id="stage4">
                        <div class="functionInputs row fullborder">
                            <div class="col-12 ParamterBox">
                                <label for="InitialCausticFlud">משך מילוי סודה קאוסטיק ראשוני- ל2 החביות בשניות</label>
                                <input type="number" step="0.1" id="InitialCausticFlud" name="InitialCausticFlud" required value="{{ settings['InitialCausticFlud'] }}">
                            </div>
                        </div>
                        <div class="functionInputs row fullborder">
                            <div class="col-12 col-md-6 ParamterBox">
                                <label for="CausticRinseKeg1">משך רחיצה קאוסטיק חבית ימין בשניות</label>
                                <input type="number" step="0.1" id="CausticRinseKeg1" name="CausticRinseKeg1" required value="{{ settings['CausticRinseKeg1'] }}">
                            </div>
                            <div class="col-12 col-md-6 ParamterBox">
                                <label for="CausticRinseKeg2">משך רחיצה קאוסטיק חבית שמאל בשניות</label>
                                <input type="number" step="0.1" id="CausticRinseKeg2" name="CausticRinseKeg2" required value="{{ settings['CausticRinseKeg2'] }}">
                            </div>
                        </div>
                        <div class="row functionSubLabel">כניסת קאוסטיק לחבית ללא יציאת הקאוסטיק לבניית לחץ</div>
                        <div class="functionInputs row fullborder">
                            <div class="col-12 col-md-6 ParamterBox">
                                <label for="pressurizeCausticInKeg">משך דחיסת הקאוסטיק לחבית בשניות</label>
                                <input type="number" step="0.1" id="pressurizeCausticInKeg" name="pressurizeCausticInKeg" required value="{{ settings['pressurizeCausticInKeg'] }}">
                            </div>
                            <div class="col-12 col-md-6 ParamterBox">
                                <label for="causticSoakInKeg">משך השריית קאוסטיק בחבית בלחץ בשניות</label>
                                <input type="number" step="0.1" id="causticSoakInKeg" name="causticSoakInKeg" required value="{{ settings['causticSoakInKeg'] }}">
                            </div>
                        </div>
                        <div class="functionInputs row fullborder">
                            <div class="col-12 ParamterBox">
                                <label for="SecondCausticFlud">משך מילוי סודה קאוסטיק שני- ל2 החביות בשניות</label>
                                <input type="number" step="0.1" id="SecondCausticFlud" name="SecondCausticFlud" required value="{{ settings['SecondCausticFlud'] }}">
                            </div>
                        </div>
                        <div class="row functionSubLabel fullborder">התזת קאוסטיק קצרה</div>
                        <div class="functionInputs row fullborder">
                            <div class="col-12 col-md-3 ParamterBox">
                                <label for="recureShortCausticSquirt">כמות חזרות</label>
                                <input type="number" step="0.1" id="recureShortCausticSquirt" name="recureShortCausticSquirt" required value="{{ settings['recureShortCausticSquirt'] }}">
                            </div>
                            <div class="col-12 col-md-4 ParamterBox">
                                <label for="CausticSquirtPumpOn">משך הפעלת משאבה בשניות</label>
                                <input type="number" step="0.1" id="CausticSquirtPumpOn" name="CausticSquirtPumpOn" required value="{{ settings['CausticSquirtPumpOn'] }}">
                            </div>
                            <div class="col-12 col-md-5 ParamterBox">
                                <label for="CausticSquirtPumpOff">משך כיבוי משאבה בשניות</label>
                                <input type="number" step="0.1" id="CausticSquirtPumpOff" name="CausticSquirtPumpOff" required value="{{ settings['CausticSquirtPumpOff'] }}">
                            </div>
                        </div>
                        <div class="row functionSubLabel fullborder">התזת קאוסטיק בשילוב אוויר</div>
                        <div class="functionInputs row fullborder">
                            <div class="col-12 col-md-6 ParamterBox">
                                <label for="recurePurgeCausticSquirt">כמות חזרות</label>
                                <input type="number" step="0.1" id="recurePurgeCausticSquirt" name="recureShortCausticSquirt" required value="{{ settings['recureShortCausticSquirt'] }}">
                            </div>
                            <div class="col-12 col-md-6 ParamterBox">
                                <label for="airAndPumpIntervale">אינטרוול אוויר ומשאבה בשניות</label>
                                <input type="number" step="0.1" id="airAndPumpIntervale" name="airAndPumpIntervale" required value="{{ settings['airAndPumpIntervale'] }}">
                            </div>
                        </div>
                        <div class="row functionSubLabel fullborder">התזת קאוסטיק ארוכה- לאחר התזה בשילוב אוויר</div>
                        <div class="functionInputs row">
                            <div class="col-12 col-md-3 ParamterBox">
                                <label for="recureLastCausticSquirt">כמות חזרות</label>
                                <input type="number" step="0.1" id="recureLastCausticSquirt" name="recureLastCausticSquirt" required value="{{ settings['recureLastCausticSquirt'] }}">
                            </div>
                            <div class="col-12 col-md-4 ParamterBox">
                                <label for="CausticLastSquirtPumpOn">משך הפעלת משאבה בשניות</label>
                                <input type="number" step="0.1" id="CausticLastSquirtPumpOn" name="CausticLastSquirtPumpOn" required value="{{ settings['CausticLastSquirtPumpOn'] }}">
                            </div>
                            <div class="col-12 col-md-5 ParamterBox">
                                <label for="CausticLastSquirtPumpOff">משך כיבוי משאבה בשניות</label>
                                <input type="number" step="0.1" id="CausticLastSquirtPumpOff" name="CausticLastSquirtPumpOff" required value="{{ settings['CausticLastSquirtPumpOff'] }}">
                            </div>
                        </div>
                    </div>
                </div>
                <!-- stage 5-->
                <div class="functionBox container-fluid">
                    <div class="functionLabel row" id="label5">
                        <div class="col">שלב #5 דחיקת קאוסטיק החוצה עם אוויר</div>
                        <div class="col TglBtnBox"><img src="assets/pics/down.png" id="Tgl5"></div>
                    </div>
                    <div class="functionInputs row" id="stage5">
                        <div class="col-12 col-md-3 ParamterBox">
                            <label for="PostCausticPurgeRecure">כמות חזרות</label>
                            <input type="number" step="0.1" id="PostCausticPurgeRecure" name="PostCausticPurgeRecure" required value="{{ settings['PostCausticPurgeRecure'] }}">
                        </div>
                        <div class="col-12 col-md-4 ParamterBox">
                            <label for="PostCausticPurgeTon">משך כניסת אוויר בכל חזרה בשניות</label>
                            <input type="number" step="0.1" id="PostCausticPurgeTon" name="PostCausticPurgeTon" required value="{{ settings['PostCausticPurgeTon'] }}">
                        </div>
                        <div class="col-12 col-md-5 ParamterBox">
                            <label for="PostCausticPurgeToff">משך ניקוז ללא אוויר בכל חזרה בשניות</label>
                            <input type="number" step="0.1" id="PostCausticPurgeToff" name="PostCausticPurgeToff" required value="{{ settings['PostCausticPurgeToff'] }}">
                        </div>
                    </div>
                </div>
                <!-- stage 6-->
                <div class="functionBox container-fluid">
                    <div class="functionLabel row" id="label6">
                        <div class="col">שלב #6 שטיפה במים לאחר ניקוי קאוסטיק</div>
                        <div class="col TglBtnBox"><img src="assets/pics/down.png" id="Tgl6"></div>
                    </div>
                    <div class="functionInputs row" id="stage6">
                        <div class="col-12 col-md-3 ParamterBox">
                            <label for="postCausticWaterRinseRecure">כמות חזרות</label>
                            <input type="number" step="0.1" id="postCausticWaterRinseRecure" name="postCausticWaterRinseRecure" required value="{{ settings['postCausticWaterRinseRecure'] }}">
                        </div>
                        <div class="col-12 col-md-4 ParamterBox">
                            <label for="postCausticWaterRinseOn">משך כניסת מים בכל חזרה בשניות</label>
                            <input type="number" step="0.1" id="postCausticWaterRinseOn" name="postCausticWaterRinseOn" required value="{{ settings['postCausticWaterRinseOn'] }}">
                        </div>
                        <div class="col-12 col-md-5 ParamterBox">
                            <label for="postCausticWaterRinseOf">משך ניקוז ללא מים בכל חזרה בשניות</label>
                            <input type="number" step="0.1" id="postCausticWaterRinseOf" name="postCausticWaterRinseOf" required value="{{ settings['postCausticWaterRinseOf'] }}">
                        </div>
                    </div>
                </div>
                <!-- stage 7-->
                <div class="functionBox container-fluid">
                    <div class="functionLabel row" id="label7">
                        <div class="col">שלב #7 חיטוי בחומצה פראצטית</div>
                        <div class="col TglBtnBox"><img src="assets/pics/down.png" id="Tgl7"></div>
                    </div>
                    <div id="stage7">
                        <div class="functionInputs row fullborder">
                            <div class="col-12 col-md-6 ParamterBox">
                                <label for="SanitizeInitialKeg1">משך חיטוי פראצטית חבית ימין בשניות</label>
                                <input type="number" step="0.1" id="SanitizeInitialKeg1" name="SanitizeInitialKeg1" required value="{{ settings['SanitizeInitialKeg1'] }}">
                            </div>
                            <div class="col-12 col-md-6 ParamterBox">
                                <label for="SanitizeInitialKeg2">משך חיטוי פראצטית חבית שמאל בשניות</label>
                                <input type="number" step="0.1" id="SanitizeInitialKeg2" name="SanitizeInitialKeg2" required value="{{ settings['SanitizeInitialKeg2'] }}">
                            </div>
                        </div>
                        <div class="functionInputs row fullborder">
                            <div class="col-12 ParamterBox">
                                <label for="SanitizeInitialBothKegs">משך חיטוי פראצטית ל2 החביות בשניות</label>
                                <input type="number" step="0.1" id="SanitizeInitialBothKegs" name="SanitizeInitialBothKegs" required value="{{ settings['SanitizeInitialBothKegs'] }}">
                            </div>
                        </div>
                        <div class="row functionSubLabel fullborder">התזת פראצטית ראשונה</div>
                        <div class="functionInputs row fullborder">
                            <div class="col-12 col-md-3 ParamterBox">
                                <label for="paaInitialPumpRecure">כמות חזרות</label>
                                <input type="number" step="0.1" id="paaInitialPumpRecure" name="paaInitialPumpRecure" required value="{{ settings['paaInitialPumpRecure'] }}">
                            </div>
                            <div class="col-12 col-md-4 ParamterBox">
                                <label for="paaInitialPumpOn">משך הפעלת משאבה בשניות</label>
                                <input type="number" step="0.1" id="paaInitialPumpOn" name="paaInitialPumpOn" required value="{{ settings['paaInitialPumpOn'] }}">
                            </div>
                            <div class="col-12 col-md-5 ParamterBox">
                                <label for="paaInitialPumpOff">משך כיבוי משאבה בשניות</label>
                                <input type="number" step="0.1" id="paaInitialPumpOff" name="paaInitialPumpOff" required value="{{ settings['paaInitialPumpOff'] }}">
                            </div>
                        </div>
                        <div class="row functionSubLabel fullborder">התזת פראצטית בשילוב CO2</div>
                        <div class="functionInputs row fullborder">
                            <div class="col-12 col-md-6 ParamterBox">
                                <label for="paaSquirtRecure">כמות חזרות</label>
                                <input type="number" step="0.1" id="paaSquirtRecure" name="paaSquirtRecure" required value="{{ settings['paaSquirtRecure'] }}">
                            </div>
                            <div class="col-12 col-md-6 ParamterBox">
                                <label for="Co2PumpIntervale">אינטרוול CO2 ומשאבה בשניות</label>
                                <input type="number" step="0.1" id="Co2PumpIntervale" name="Co2PumpIntervale" required value="{{ settings['Co2PumpIntervale'] }}">
                            </div>
                        </div>
                        <div class="row functionSubLabel fullborder">חיטוי בחומצה פראצטית ארוך לשני החביות- לאחר התזה בשילוב CO2</div>
                        <div class="functionInputs row">
                            <div class="col-12 ParamterBox">
                                <label for="postSquirtSanitizeBothKegs">משך חיטוי בחומצה פראצטית ארוך לשני החביות</label>
                                <input type="number" step="0.1" id="postSquirtSanitizeBothKegs" name="postSquirtSanitizeBothKegs" required value="{{ settings['postSquirtSanitizeBothKegs'] }}">
                            </div>
                        </div>
                    </div>
                </div>
                <!-- stage 8 -->
                <div class="functionBox container-fluid">
                    <div class="functionLabel row" id="label8">
                        <div class="col">שלב #8 דחיקת חומצה פראצטית החוצה עם CO2</div>
                        <div class="col TglBtnBox"><img src="assets/pics/down.png" id="Tgl8"></div>
                    </div>
                    <div id="stage8">
                        <div class="row functionSubLabel fullborder">חבית ימין</div>
                        <div class="functionInputs row fullborder">
                            <div class="col-12 col-md-3 ParamterBox">
                                <label for="co2PurgeKeg1Recure">כמות חזרות</label>
                                <input type="number" step="0.1" id="co2PurgeKeg1Recure" name="co2PurgeKeg1Recure" required value="{{ settings['co2PurgeKeg1Recure'] }}">
                            </div>
                            <div class="col-12 col-md-4 ParamterBox">
                                <label for="co2PurgeKeg1Open">משך כניסת CO2 בכל חזרה בשניות</label>
                                <input type="number" step="0.1" id="co2PurgeKeg1Open" name="co2PurgeKeg1Open" required value="{{ settings['co2PurgeKeg1Open'] }}">
                            </div>
                            <div class="col-12 col-md-5 ParamterBox">
                                <label for="co2PurgeKeg1Closed">משך ניקוז ללא CO2 בכל חזרה בשניות</label>
                                <input type="number" step="0.1" id="co2PurgeKeg1Closed" name="co2PurgeKeg1Closed" required value="{{ settings['co2PurgeKeg1Closed'] }}">
                            </div>
                        </div>
                        <div class="row functionSubLabel fullborder">חבית שמאל</div>
                        <div class="functionInputs row fullborder">
                            <div class="col-12 col-md-3 ParamterBox">
                                <label for="co2PurgeKeg2Recure">כמות חזרות</label>
                                <input type="number" step="0.1" id="co2PurgeKeg2Recure" name="co2PurgeKeg2Recure" required value="{{ settings['co2PurgeKeg2Recure'] }}">
                            </div>
                            <div class="col-12 col-md-4 ParamterBox">
                                <label for="co2PurgeKeg2Open">משך כניסת CO2 בכל חזרה בשניות</label>
                                <input type="number" step="0.1" id="co2PurgeKeg2Open" name="co2PurgeKeg2Open" required value="{{ settings['co2PurgeKeg2Open'] }}">
                            </div>
                            <div class="col-12 col-md-5 ParamterBox">
                                <label for="co2PurgeKeg2Closed">משך ניקוז ללא CO2 בכל חזרה בשניות</label>
                                <input type="number" step="0.1" id="co2PurgeKeg2Closed" name="co2PurgeKeg2Closed" required value="{{ settings['co2PurgeKeg2Closed'] }}">
                            </div>
                        </div>
                        <div class="row functionSubLabel fullborder">חבית ימין ושמאל יחד</div>
                            <div class="functionInputs row">
                                <div class="col-12 ParamterBox">
                                <label for="co2PurgeBothKegsOpen">משך דחיקת חומצה פראצטית החוצה עם CO2 ל 2 החביות</label>
                                <input type="number" step="0.1" id="co2PurgeBothKegsOpen" name="co2PurgeBothKegsOpen" required value="{{ settings['co2PurgeBothKegsOpen'] }}">
                            </div>
                        </div>
                    </div>
                </div>
                <!-- stage 9 -->
                <div class="functionBox container-fluid">
                    <div class="functionLabel row" id="label9">
                        <div class="col">שלב #9 בניית לחץ בחבית עם CO2</div>
                        <div class="col TglBtnBox"><img src="assets/pics/down.png" id="Tgl9"></div>
                    </div>
                    <div id="stage9">
                        <div class="functionInputs row fullborder">
                            <div class="col-12 col-md-6 ParamterBox">
                                <label for="kegPdestination">לחץ יעד ב PSI</label>
                                <input type="number" disabled step="0.1" id="kegPdestination" name="kegPdestination" required value="{{ settings['kegPdestination'] }}">
                            </div>
                            <div class="col-12 col-md-6 ParamterBox">
                                <label for="TimeOutPdestination">משך המתנה להגעה ליעד</label>
                                <input type="number" disabled step="0.1" id="TimeOutPdestination" name="TimeOutPdestination" required value="{{ settings['TimeOutPdestination'] }}">
                            </div>
                        </div>
                        <div class="functionInputs row">
                            <div class="col-12 col-md-6 ParamterBox">
                                <label for="PostTimeOutBuildP">משך בניית לחץ לאחר המתנה במידה ולא הגיע ללחץ יעד</label>
                                <input type="number" disabled step="0.1" id="PostTimeOutBuildP" name="PostTimeOutBuildP" required value="{{ settings['PostTimeOutBuildP'] }}">
                            </div>
                            <div class="col-12 col-md-6 ParamterBox">
                                <label for="PTimeWhenSensorDisabled">משך בניית לחץ במידה ומתג חיישני לחץ כבוי</label>
                                <input type="number" step="0.1" id="PTimeWhenSensorDisabled" name="PTimeWhenSensorDisabled" required value="{{ settings['PTimeWhenSensorDisabled'] }}">
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="SubmitionBox">
                    <button type="submit" id="send" class="formBtn">עדכן נתונים</button>
                    <button type="button" id="reset-btn" class="formBtn">איפוס לנתוני בירת מחדל</button>
                </div>
            </div>
            <div id="confirmBox" class="hiddenBox">
                <div id="conirmContent">מרענן מהשרת</div>
                <button id="exitConfirm">אישור</button>
            </div>
        </form>
    </div>





    <script>
        const attributes = [
    "FirstAirPurgeRecure", "FirstAirPurgeTon", "FirstAirPurgeToff", "InitialWaterFlud",
    "recureMedSquirt", "medSquirtWaterOn", "medSquirtWaterOff", "recureShortSquirt", 
    "ShortSquirtWaterOn", "ShortSquirtWaterOff", "recureLongSquirt", "LongSquirtWaterOn", 
    "LongSquirtWaterOff", "RinseWaterWithPump", "PostWaterPurgeRecure", "PostWaterPurgeTon", 
    "PostWaterPurgeToff", "InitialCausticFlud", "CausticRinseKeg1", "CausticRinseKeg2", 
    "pressurizeCausticInKeg", "causticSoakInKeg", "SecondCausticFlud", "recureShortCausticSquirt", 
    "CausticSquirtPumpOn", "CausticSquirtPumpOff", "recurePurgeCausticSquirt", 
    "airAndPumpIntervale", "recureLastCausticSquirt", "CausticLastSquirtPumpOn", 
    "CausticLastSquirtPumpOff", "PostCausticPurgeRecure", "PostCausticPurgeTon", 
    "PostCausticPurgeToff", "postCausticWaterRinseRecure", "postCausticWaterRinseOn", 
    "postCausticWaterRinseOf", "SanitizeInitialKeg1", "SanitizeInitialKeg2", 
    "SanitizeInitialBothKegs", "paaInitialPumpRecure", "paaInitialPumpOn", "paaInitialPumpOff", 
    "paaSquirtRecure", "Co2PumpIntervale", "postSquirtSanitizeBothKegs", "co2PurgeKeg1Recure", 
    "co2PurgeKeg1Open", "co2PurgeKeg1Closed", "co2PurgeKeg2Recure", "co2PurgeKeg2Open", 
    "co2PurgeKeg2Closed", "co2PurgeBothKegsOpen", "kegPdestination", "TimeOutPdestination", 
    "PostTimeOutBuildP", "PTimeWhenSensorDisabled"
];
        
        const disabledInputs= [
        "kegPdestination", "TimeOutPdestination", "PostTimeOutBuildP"
        ]

        const LabelList = [
        "label1",
        "PrebootToggleHousing",
        "PressureToggleHousing",
        "label2",
        "label3",
        "label4",
        "label5",
        "label6",
        "label7",
        "label8",
        "label9"
        ]

        function DisableItems(){
            let confirmBox = document.getElementById("confirmBox");
            let body = document.getElementById("bodyBox");
            confirmBox.classList.remove("hiddenBox");  // Remove hidden class
            confirmBox.classList.add("infoBox");       // Add infoBox class
            body.classList.add("disable_scroll");       // Add infoBox class
            let form = document.getElementById("control-form");
            let formElements = form.elements;
            for (let i = 0; i < formElements.length; i++) {
                formElements[i].disabled = true;  // Disable each form element
            }
            let exitBnt= document.getElementById("exitConfirm");
            exitBnt.disabled = false
            LabelList.forEach(function(labelId) {
                let LabelElemnt = form.querySelector(`#${labelId}`);
                if (LabelElemnt) {
                    LabelElemnt.classList.add("functionLabelDisable");
                }
            });
        }

        let preboobot= 1
        let pressure= 1
        
        $('#PrebootToggleHousing').on('click',function(){
            let FNCTglBtn = document.getElementById("PrebootToggleHousing");
            if (preboobot== 1){
                FNCTglBtn.classList.add("FNCTglHouseOFF");
                preboobot=0
            }
            else if (preboobot== 0){
                FNCTglBtn.classList.remove("FNCTglHouseOFF");
                preboobot=1
            }
        })
        $('#PressureToggleHousing').on('click',function(){
            let FNCTglBtn = document.getElementById("PressureToggleHousing");
            if (pressure== 1){
                FNCTglBtn.classList.add("FNCTglHouseOFF");
                pressure=0
            }
            else if (pressure== 0){
                FNCTglBtn.classList.remove("FNCTglHouseOFF");
                pressure=1
            }
        })

        $(document).ready(function() {
                // Initial fetch of variable values when page loads
            $.ajax({
                type: "GET",
                url: 'https://10.0.0.1:5000/get_initial_values', // Ensure this route is set up on the backend
                success: function(response) {
                    if (response.success) {
                        var inner = document.getElementById("conirmContent");
                        inner.innerHTML = 'נתונים נטענו בהצלחה מהשרת!';
                        DisableItems()
                        // Populate form fields with initial values
                        // $('#FirstAirPurgeRecure').val(response.initial_values.FirstAirPurgeRecure);
                        // $('#FirstAirPurgeTon').val(response.initial_values.FirstAirPurgeTon);
                        // $('#FirstAirPurgeToff').val(response.initial_values.FirstAirPurgeToff);
                        attributes.forEach(attribute => {
                        // Check if the attribute exists in the response object
                        if (response.initial_values.hasOwnProperty(attribute)) {
                        // Set the value of the form field using jQuery
                        $('#' + attribute).val(response.initial_values[attribute]);
                        }
                        });
                        // $('#').val(response.initial_values.);
                    }
                },
                error: function(xhr, status, error) {
                    var inner = document.getElementById("conirmContent");
                    inner.innerHTML = 'תקלה בתקשורת לשרת!';
                    DisableItems()
                    const errorMessage = xhr.responseJSON ? xhr.responseJSON.error : 'Failed to load initial values';
                    console.error('Error loading initial values:', errorMessage);
                }
            });
        });
        
        document.getElementById("exitConfirm").addEventListener("click", function(event) {
            event.preventDefault();  // Prevents form submission (and reload)
            let confirmBox = document.getElementById("confirmBox");
            confirmBox.classList.remove("infoBox");    // Remove infoBox class
            confirmBox.classList.add("hiddenBox");      // Add hiddenBox class
            let body = document.getElementById("bodyBox");
            body.classList.remove("disable_scroll");
            let form = document.getElementById("control-form");
            let formElements = form.elements;
            for (let i = 0; i < formElements.length; i++) {
                formElements[i].disabled = false;  // Disable each form element
            }
            disabledInputs.forEach(function(inputId) {
                let inputElement = form.querySelector(`#${inputId}`);
                if (inputElement) {
                    inputElement.disabled = true;
                }
            });
            LabelList.forEach(function(labelId) {
                let LabelElemnt = form.querySelector(`#${labelId}`);
                if (LabelElemnt) {
                    LabelElemnt.classList.remove("functionLabelDisable");
                }
            });
        });

        $('#control-form').on('submit', function(e) {
                e.preventDefault(); // Prevent the default form submission

                // Prepare data to send
                // const variableData = {
                //     index0: $('#FirstAirPurgeRecure').val() || 1, // Fallback to 0 if empty
                //     index1: $('#FirstAirPurgeTon').val() || 1, // Fallback to 0 if empty
                //     index2: $('#FirstAirPurgeToff').val() || 1.5  // Fallback to 0 if empty
                //     // index: $('#').val() || 1.5  // Fallback to 0 if empty
                // };
                const formData = {};
                // Loop through each attribute and collect its value from the form
                attributes.forEach(attribute => {
                    // Collect value from the form field, fallback to 5 if no value
                    formData[attribute] = $('#' + attribute).val() || 5;
                });
                // Log form data for debugging
                console.log('Form data:', formData);

                // Send data to the Flask backend
                $.ajax({
                    type: "POST",
                    url: 'https://10.0.0.1:5000/update', // Update with your Raspberry Pi's IP
                    data: formData,
                    cache: false,
                    success: function(response) {
                        if (response.success) {
                            var inner = document.getElementById("conirmContent");
                            inner.innerHTML = 'נתונים עודכנו בהצלחה בשרת!';
                            DisableItems()      
                            // alert('Variables updated to: ' + JSON.stringify(response.new_values));
                            // $('#FirstAirPurgeRecure').val(response.new_values[0]);
                            // $('#FirstAirPurgeTon').val(response.new_values[1]);
                            // $('#FirstAirPurgeToff').val(response.new_values[2]);
                            // $('#').val(response.new_values.);
                            attributes.forEach(attribute => {
                                if (response.new_values.hasOwnProperty(attribute)) {
                                    $('#' + attribute).val(response.new_values[attribute]);
                                }
                            });

                        }
                    },
                    error: function(xhr, status, error) {
                        const errorMessage = xhr.responseJSON ? xhr.responseJSON.error : 'An unknown error occurred';
                        // alert('Error: ' + errorMessage);
                        var inner = document.getElementById("conirmContent");
                        inner.innerHTML = 'תקלה בתקשורת לשרת!';
                        DisableItems()
                        console.error('Error details:', xhr); // Log error details to the console
                    }
                });
            });
            
        $('#reset-btn').on('click', function() {
            $.ajax({
                type: "POST",
                url: 'https://10.0.0.1:5000/reset',  // Ensure this matches the route for resetting to default
                success: function(response) {
                    if (response.success) {
                        var inner = document.getElementById("conirmContent");
                        inner.innerHTML = 'עודכנו נתוני ברירת מחדל';
                        DisableItems()
                        // alert('Values reset to default: ' + JSON.stringify(response.new_values));
                        // Update the form values with the default values returned from the backend
                        // $('#FirstAirPurgeRecure').val(response.new_values.FirstAirPurgeRecure);
                        // $('#FirstAirPurgeTon').val(response.new_values.FirstAirPurgeTon);
                        // $('#FirstAirPurgeToff').val(response.new_values.FirstAirPurgeToff);
                        // $('#').val(response.new_values.);
                        attributes.forEach(attribute => {
                        // Check if the attribute exists in the response object
                        if (response.initial_values.hasOwnProperty(attribute)) {
                        // Set the value of the form field using jQuery
                        $('#' + attribute).val(response.initial_values[attribute]);
                        }
                        });
                        
                    }
                }
            });
        });
        
        function toggleStage(labelId, stageId) {
            let clicked = false;
            document.getElementById(labelId).addEventListener("click", function(event) {
                let functionInputs = document.getElementById(stageId);
                let functionLabel = document.getElementById(labelId);
                if (!clicked) {
                    functionInputs.classList.add("functionInputsHidden");
                    functionLabel.classList.add("functionLabelHiddenInput");
                    clicked = true;
                } else {
                    functionInputs.classList.remove("functionInputsHidden");
                    functionLabel.classList.remove("functionLabelHiddenInput");
                    clicked = false;
                }
            });
        }

        toggleStage("label1", "stage1");
        toggleStage("label2", "stage2");
        toggleStage("label3", "stage3");
        toggleStage("label4", "stage4");
        toggleStage("label5", "stage5");
        toggleStage("label6", "stage6");
        toggleStage("label7", "stage7");
        toggleStage("label8", "stage8");
        toggleStage("label9", "stage9");

    </script>
    </body>
</html>

